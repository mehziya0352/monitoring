mkdir telegraf-cpu-alert 
cd telegraf-cpu-alert/
nano inventory.ini
sudoapt update
sudo apt update
nano inventory.ini
sudo nano inventory.ini
sudo apt install nano
nano inventory.ini
nano playbook.yaml
mkdir -p roles/telegraf_alert/tasks/main.yml
ls
nano roles/telegraf_alert/tasks/main.yml
cd roles/telegraf_alert/tasks/main.yml
cd ..
rm main.yml/
rm rf main.yml
rm -rf main.yml
ls
nano main.yaml
cd ..
mkdir templates
cd templates/
nano telegraf.conf.j2
cd ..
mkdir files
cd files/
nano telegraf_alert.sh
cd ..
ls
ansible-playbook -i inventory.ini playbook.yml
sudo apt install ansible
ansible --version
ansible-playbook -i inventory.ini playbook.yml
ansible-playbook -i inventory.ini playbook.yaml
cd roles/telegraf_alert/tasks/
nano main.yaml 
cd ..
ansible-playbook -i inventory.ini playbook.yaml
cd roles/telegraf_alert/tasks/
nano main.yaml 
cd
cd telegraf-cpu-alert/
ansible-playbook -i inventory.ini playbook.yaml
cd roles/telegraf_alert/tasks/
nano main.yaml 
cd 
cd telegraf-cpu-alert/
ansible-playbook -i inventory.ini playbook.yaml
cd roles/telegraf_alert/tasks/
nano main.yaml 
cd ..
cd..
cd ..
ansible-playbook -i inventory.ini playbook.yaml
cd roles/telegraf_alert/tasks/
nano main.yaml 
cd ..
ansible-playbook -i inventory.ini playbook.yaml
cd roles/telegraf_alert/tasks/
nano main.yaml 
cd 
cd telegraf-cpu-alert/
ansible-playbook -i inventory.ini playbook.yaml
cd roles/telegraf_alert/tasks/
nano main.yaml 
cd telegraf-cpu-alert/
cd /telegraf-cpu-alert/
cd
cd telegraf-cpu-alert/
ansible-playbook -i inventory.ini playbook.yaml
cd roles/telegraf_alert/tasks/
nano main.yaml 
cd
cd telegraf-cpu-alert/
ansible-playbook -i inventory.ini playbook.yaml
cd roles/telegraf_alert/tasks/
nano main.yaml 
cd
cd telegraf-cpu-alert/
ansible-playbook -i inventory.ini playbook.yaml
sudo rm -f /etc/apt/sources.list.d/influxdata.list
sudo rm -f /usr/share/keyrings/influxdata-archive-keyring.gpg
sudo apt update
ansible-playbook -i inventory.ini playbook.yaml
cd roles/telegraf_alert/tasks/
nano main.yaml 
cd
sudo rm -f /etc/apt/sources.list.d/influxdata.list
sudo rm -f /usr/share/keyrings/influxdata-archive-keyring.gpg
sudo apt update
cd telegraf-cpu-alert/
ansible-playbook -i inventory.ini playbook.yaml
cd roles/telegraf_alert/tasks/
nano main.yaml 
cd
cd telegraf-cpu-alert/
ansible-playbook -i inventory.ini playbook.yaml
cd roles/telegraf_alert/tasks/
nano main.yaml 
cd
cd telegraf-cpu-alert/
ansible-playbook -i inventory.ini playbook.yaml
cd roles/
ls
cd telegraf_alert/
ls
cd files/
ls
nano telegraf_alert.sh 
cd 
cd telegraf-cpu-alert/
nano m
cd roles/telegraf_alert/tasks/
nano main.yaml 
cd ..
ls
cd templates/
nano telegraf.conf.j2 
cd ..
cd tasks/
nano main.yaml 
cd 
cd telegraf-cpu-alert/
ansible-playbook -i inventory.ini playbook.yaml
cd roles/telegraf_alert/templates/
nano telegraf.conf.j2 
cd ..
cd tasks/
nano main.yaml 
cd ..
cd files/
mv telegraf_alert.sh cpu_alert.sh
ls
cd ..
cd tasks/
nano main.yaml 
cd ..
ansible-playbook -i inventory.ini playbook.yaml
sudo apt update
sudo apt install stress -y
stress --cpu 2 --timeout 60
journalctl -u telegraf -f
sudo nano /etc/telegraf/alert.star
cd roles/telegraf_alert/templates/
nano telegraf.conf.j2 
sudo systemctl restart telegraf
sudo systemctl status telegraf
journalctl -u telegraf -f
stress --cpu 2 --timeout 60
tail -f /tmp/high_cpu_alert.log
nano /usr/local/bin/cpu_alert.sh
sudo nano /usr/local/bin/cpu_alert.sh 
chmod +x /usr/local/bin/telegraf_cpu_alert.sh
chmod +x /usr/local/bin/cpu_alert.sh
sudo chmod +x /usr/local/bin/cpu_alert.sh
sudo apt install jq -y
sudo systemctl restart telegraf
sudo systemctl status telegraf
cat /etc/telegraf/telegraf.conf | grep exec -A 10
stress --cpu 2 --timeout 60
tail -f /tmp/high_cpu_alert.log
sudo nano /usr/local/bin/cpu_alert.sh 
tail -f /tmp/cpu_alert.log
echo 'cpu,host=devops usage_user=95.0' | /usr/local/bin/cpu_alert.sh
sudo apt update && sudo apt install -y bc
sudo nano /usr/local/bin/cpu_alert.sh 
sudo chmod +x /usr/local/bin/cpu_alert.sh
sudo systemctl restart telegraf
echo 'cpu,host=devops usage_user=95.0' | /usr/local/bin/cpu_alert.sh
cat /tmp/cpu_alert.log
echo "Test email body" | mail -s "Test Subject" mehziya0352@gmail.com
cd ..
ansible-playbook -i inventory.ini playbook.yaml
which mial
which mail
echo "This is a test email from my server" | mail -s "Test Mail" mehziya0352@gmail.com
